- Ansible : IT automation tool, open-source

Redhat Ansible tower ia a paid,GUI based tool to manage Ansible automation
Ansible AWX -> open source free software

@ Each specific task in ansible is written through modules
@ Multiple modules are written in sequntial order
@ Multiple modules for related tasks is called a play
@ All plays together is called a playbook
@ playbook is written in YAML


Web-servers:
	Install httpd -> module
	Enable httpd -> module
	start httpd -> module                   =========> play

 enable http port on furewall -> module         =========> play  +++++>>>>> task
	
	Database servers:
	 Login to DB -> module
	 create a table -> module
	 restart DB -> module                   ==========> play ++++++>>>> task  ))))))))))))))))))set of plays----> playbook
		
All tasks in YAML are executed in sequential order
		
ansible-playbook --syntax-check pb.yaml ---> syntax check
ansible-playbook --check pb.yaml ---> dry-run

--extra-vars -> to mention the extra variables

Adhoc run : ansible localhost -m ping


Module to print something on the screen : debug
---
- name: my first playbook
  hosts: localhost

  tasks:
  - name : test
    debug: msg="hallo"
~            
Run the playbook:
-------------------
ansible-playbook hallo.yaml


Running multiple tasks:
=========================

- name: run multiple tasks
  hosts: localhost

  tasks:
  - name: test
    debug: msg="hallo"
  - name: ping 
    ping:

Remote client hosts file syntax
--------------------------------
-All remote clients are considered inventory in Ansible
-Ansible keeps its inventory info in host name named : /etc/ansible/hosts, if inventory location is kept different,
 specify ansible-playbook -i inventory-location
-The host file is created during ansible installation

hosts are either identified by fqdn/ip
Can use headers to group clients
[db-servers]
10.133.42.0
10.132.23.0
[app-servers]
10.0.0.1

Ansible has a default for all
[all]
10.0.0.1
''
''

can use iprange 10.0.0.[11-14]

Establish connection to remote hosts
-------------------------------------
Generate SSH keys on the control nodes and copy it over to the clients for passwordless
ssh-keygen
ssh-copy-id 10.0.0.99 (root password of remote is required)

ssh 10.0.0.99 -> success

Extra vars
---------------
tasks:
- name: change password
  user:
     name: george
     update_password: always
     password: "{{ newpassword|password_hash }}"
     
ansible-playbook changepass.yml --extra-vars newpassword="@#jhdj"
     
Download package from URL
---------------------------

---
- name: Download Tomcat from tomcat.apache.org
  hosts: localhost
  tasks:
   - name: Create a Directory /opt/tomcat
     file:
       path: /opt/tomcat
       state: directory
       mode: 0755
       owner: root
       group: root
   - name: Download Tomcat using get_url
     get_url:
       url: https://dlcdn.apache.org/tomcat/tomcat-8/v8.5.78/bin/apache-tomcat-8.5.78.tar.gz
       dest: /opt/tomcat
       mode: 0755
       group: kiruthika
       owner: kiruthika
